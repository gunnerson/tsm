{% extends "invent/base.html" %}
{% load static %}

{% block left-menu%}
  <ul>
    <li>
      <a href="" onClick="window.location.replace(document.referrer);return false;" role="button">Back</a>
    </li>
    <li>
      <a href="{% url 'invent:create_truck' %}" role="button">+ New truck</a>
    </li>
    <li>
      <button type="submit" form="data_form">+ Save changes</a>
    </li>
  </ul>
{% endblock left-menu %}

{% block page-title %}
  <div class="page-title">
    <span>List of truck records</span>
  </div>
  <div class="address-line">
    <ol>
        <li><a href="{% url 'invent:index' %}">Home</a> > </li>
        <li>Trucks</li>
    </ol>
  </div>
{% endblock page-title %}

{% block content %}
  <form method='post' id="data_form">
    {% csrf_token %}
    {{ formset.management_form }}
    <table class="formset-table {{ font_class }}">
      <thead>
        <tr>
          {% for field in fields %}
            <th> {{ field }} </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for form in formset %}
          <tr>
            {% for field in form %}
              {% if '-id' in field.auto_id %}
                {{ field }}
                {% if field.value %}
                  <td class="formset_field">
                    <a href="{% url 'invent:update_truck' field.value %}">
                      <img src="{% static 'img/edit.png' %}">
                    </a>
                  </td>
                {% endif %}
              {% else %}
                <td>{{ field }}{{ field.errors }}</td>
              {% endif %}
            {% endfor %}
          </tr>
          {{ form.non_field_errors }}
        {% endfor %}
      </tbody>
    </table>
  </form>
  {{ formset.non_form_errors }}
{% endblock content %}

