{% extends "invent/base.html" %}
{% load static %}

{% block left-menu%}
  <ul>
    <li>
      <a href="" onClick="window.location.replace(document.referrer);return false;" role="button">Back</a>
    </li>
    {% if write_check %}
      <li>
        <button type="submit" form="data_form">+ Save changes</a>
      </li>
    {% endif %}
  </ul>
{% endblock left-menu %}

{% block page-title %}
  <p>List of driver records</p>
  <div class="address-line">
    <ol>
        <li><a href="{% url 'invent:index' %}">Home</a> > </li>
        <li>Drivers</li>
    </ol>
  </div>
{% endblock page-title %}

{% block content %}
  <form method='post' id="data_form">
    {% csrf_token %}
    {{ formset.management_form }}
    <table class="formset-table {{ font_class }}">
      <thead>
        <tr>
          {% for field in fields %}
            <th> {{ field }} </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for form in formset %}
          <tr>
            {% for field in form %}
              {% if '-id' in field.auto_id %}
                {{ field }}
                {% if field.value and write_check %}
                  <td class="formset_field">
                    <a href="{% url 'contacts:update_driver' field.value %}">
                      <img src="{% static 'img/edit.png' %}">
                    </a>
                  </td>
                {% endif %}
              {% else %}
                <td>{{ field }}{{ field.errors }}</td>
              {% endif %}
            {% endfor %}
            {{ form.non_field_errors }}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </form>
  {{ formset.non_form_errors }}
{% endblock content %}
